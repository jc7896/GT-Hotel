<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stille Nacht | Berlin Live</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Jost:wght@300;400&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --text-gold: #f4eeb1;
            --glass: rgba(20, 20, 20, 0.4);
            --border: rgba(255, 255, 255, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Jost', sans-serif;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            /* ë°°ê²½: ì´ë¯¸ì§€ê°€ ë¡œë“œ ì•ˆë  ê²½ìš°ë¥¼ ëŒ€ë¹„í•œ ì§™ì€ ê·¸ë¼ë°ì´ì…˜ */
            background: radial-gradient(circle, #1a2a6c, #b21f1f, #fdbb2d); 
            /* ë°°ê²½ ì´ë¯¸ì§€: ëˆˆ ë®ì¸ ìˆ²ê³¼ ì‘ì€ ì˜¤ë‘ë§‰ */
            background-image: url('https://images.unsplash.com/photo-1476304884326-cd2c88572c5f?q=80&w=2069&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
        }

        /* ë°°ê²½ ì–´ë‘¡ê²Œ ëˆŒëŸ¬ì£¼ê¸° (í…ìŠ¤íŠ¸ ê°€ë…ì„±) */
        .overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.8));
            z-index: 1;
        }

        /* ëˆˆ ë‚´ë¦¬ëŠ” íš¨ê³¼ ì»¨ë²„ìŠ¤ */
        #snow {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 2;
        }

        /* ë’¤ë¡œ ê°€ê¸° ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .back-btn {
            position: absolute;
            top: 30px;
            left: 30px;
            z-index: 100;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            font-family: 'Cinzel', serif;
            font-size: 0.9rem;
            letter-spacing: 2px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
        }

        .back-btn:hover {
            color: var(--text-gold);
            background: rgba(0, 0, 0, 0.5);
            border-color: var(--text-gold);
            transform: translateX(5px);
        }

        /* ì¤‘ì•™ ë©”ì¸ íƒ€ì´í‹€ */
        .hero {
            position: relative; z-index: 10;
            text-align: center;
            animation: fadeIn 2s ease-out;
        }

        .hero h1 {
            font-family: 'Cinzel', serif;
            font-size: 6vw; /* í™”ë©´ í¬ê¸°ì— ë¹„ë¡€ */
            font-weight: 400;
            color: var(--text-gold);
            text-shadow: 0 0 30px rgba(244, 238, 177, 0.3);
            letter-spacing: 5px;
            margin-bottom: 10px;
        }

        .hero p {
            font-size: 1.2rem;
            letter-spacing: 3px;
            opacity: 0.8;
            text-transform: uppercase;
        }

        /* í•˜ë‹¨ ì‹¬í”Œ ìœ„ì ¯ ë°” (ë… (Dock) ìŠ¤íƒ€ì¼) */
        .dock {
            position: absolute;
            bottom: 50px;
            z-index: 10;
            display: flex;
            gap: 40px;
            padding: 20px 40px;
            background: var(--glass);
            backdrop-filter: blur(20px); /* ìœ ë¦¬ íš¨ê³¼ */
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 50px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            transition: transform 0.3s;
        }

        .dock:hover {
            border-color: rgba(255,255,255,0.3);
        }

        .dock-item {
            display: flex;
            align-items: center;
            gap: 12px;
            opacity: 0.7;
            transition: opacity 0.3s;
            cursor: pointer;
        }

        .dock-item:hover { opacity: 1; }

        .icon { font-size: 1.5rem; }
        .info { display: flex; flex-direction: column; }
        .label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; }
        .value { font-size: 1.1rem; font-weight: 400; font-family: 'Cinzel', serif; }

        /* ì„¸ë¡œ êµ¬ë¶„ì„  */
        .divider { width: 1px; height: 30px; background: rgba(255,255,255,0.2); }

        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ëª¨ë°”ì¼ ëŒ€ì‘ */
        @media (max-width: 768px) {
            .hero h1 { font-size: 3.5rem; }
            .dock { padding: 15px 25px; gap: 20px; width: 90%; justify-content: space-around; }
            .label { display: none; } /* ëª¨ë°”ì¼ì—ì„œëŠ” ë¼ë²¨ ìˆ¨ê¹€ */
            .back-btn { top: 20px; left: 20px; padding: 8px 15px; font-size: 0.8rem; }
        }
    </style>
</head>
<body>

    <div class="overlay"></div>
    <canvas id="snow"></canvas>

    <a href="christmas_en.html" class="back-btn">
        <i class="fas fa-arrow-left"></i> BACK TO MAIN
    </a>

    <div class="hero">
        <p>Frohe Weihnachten</p>
        <h1>SILENT NIGHT</h1>
        <p style="font-size: 0.9rem; margin-top: 20px;">Berlin, Deutschland</p>
    </div>

    <div class="dock">
        <div class="dock-item">
            <span class="icon">âœ¨</span>
            <div class="info">
                <span class="label">Weihnachten</span>
                <span class="value">D - <span id="d-day">--</span></span>
            </div>
        </div>

        <div class="divider"></div>

        <div class="dock-item">
            <span class="icon" id="w-icon">â³</span>
            <div class="info">
                <span class="label">Berlin Live</span>
                <span class="value" id="w-temp">Loading</span>
            </div>
        </div>

        <div class="divider"></div>

        <div class="dock-item">
            <span class="icon">ğŸµ</span>
            <div class="info">
                <span class="label">Now Playing</span>
                <span class="value">Last Christmas</span>
            </div>
        </div>
    </div>

    <script>
        // === 1. ëˆˆ ë‚´ë¦¬ëŠ” ìŠ¤í¬ë¦½íŠ¸ ===
        const canvas = document.getElementById('snow');
        const ctx = canvas.getContext('2d');
        
        let width = window.innerWidth;
        let height = window.innerHeight;
        canvas.width = width;
        canvas.height = height;

        const flakes = [];
        const flakeCount = 100;

        function createFlakes() {
            for (let i = 0; i < flakeCount; i++) {
                flakes.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    r: Math.random() * 3 + 1,
                    d: Math.random() * 1 + 0.5
                });
            }
        }

        function drawFlakes() {
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = "rgba(255, 255, 255, 0.8)";
            ctx.beginPath();
            for (let i = 0; i < flakeCount; i++) {
                const f = flakes[i];
                ctx.moveTo(f.x, f.y);
                ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2, true);
            }
            ctx.fill();
            moveFlakes();
        }

        function moveFlakes() {
            for (let i = 0; i < flakeCount; i++) {
                const f = flakes[i];
                f.y += f.d;
                f.x += Math.sin(f.y * 0.01) * 0.5;
                if (f.y > height) {
                    flakes[i] = { x: Math.random() * width, y: 0, r: f.r, d: f.d };
                }
            }
        }

        setInterval(drawFlakes, 25);
        createFlakes();

        window.onresize = function() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
        }

        // === 2. D-Day ê³„ì‚° ===
        const today = new Date();
        const xmas = new Date(today.getFullYear(), 11, 25);
        if (today.getMonth() == 11 && today.getDate() > 25) xmas.setFullYear(xmas.getFullYear() + 1);
        const diff = xmas.getTime() - today.getTime();
        document.getElementById('d-day').innerText = Math.ceil(diff / (1000 * 60 * 60 * 24));

        // === 3. ì‹¤ì œ ë…ì¼ ë² ë¥¼ë¦° ë‚ ì”¨ (Open-Meteo API) ===
        async function fetchBerlinWeather() {
            try {
                // ë² ë¥¼ë¦° ìœ„ë„: 52.52, ê²½ë„: 13.41
                const url = 'https://api.open-meteo.com/v1/forecast?latitude=52.52&longitude=13.41&current_weather=true';
                const response = await fetch(url);
                const data = await response.json();

                const temp = Math.round(data.current_weather.temperature);
                const code = data.current_weather.weathercode;

                // ì˜¨ë„ ì—…ë°ì´íŠ¸
                document.getElementById('w-temp').innerText = `${temp}Â°C`;

                // ë‚ ì”¨ ì½”ë“œì— ë”°ë¥¸ ì•„ì´ì½˜ ë³€ê²½
                let icon = "â˜ï¸";
                if (code <= 3) icon = "ğŸŒ™"; // ë§‘ìŒ
                else if (code <= 48) icon = "â˜ï¸"; // íë¦¼
                else if (code <= 67) icon = "ğŸŒ§ï¸"; // ë¹„
                else if (code <= 77) icon = "â„ï¸"; // ëˆˆ
                else icon = "â›ˆï¸"; // í­í’

                document.getElementById('w-icon').innerText = icon;

            } catch (error) {
                console.error("Weather fetch failed", error);
                document.getElementById('w-temp').innerText = "Offline";
            }
        }
        
        fetchBerlinWeather();
    </script>
</body>
</html>
